<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlinfos SYSTEM "../../dtd/sql-info.dtd">

<sqlinfos>

	<sqlinfo sqlid="JY0001U001">
		<sqlname>新增物资类型</sqlname>
		<sql><![CDATA[
			INSERT INTO jy_material_type (
				code,
				name
			)
			VALUES
				(
					$S{code},
					$S{name}
				)
		]]></sql>
	</sqlinfo>
	
	<sqlinfo sqlid="JY0001Q001">
		<sqlname>查询全部物资类型</sqlname>
		<sql><![CDATA[
			SELECT * FROM jy_material_type
				WHERE 
				
				(
                $ISNULL{code}
                OR jy_material_type.CODE like '%$U{code}%'
            ) and (
            	$ISNULL{name}
                OR jy_material_type.name like '%$U{name}%'
            )
					order by jy_material_type.id
		]]></sql>
	</sqlinfo>
	
	<sqlinfo sqlid="JY0001Q002">
		<sqlname>查询全部物资类型数量</sqlname>
		<sql><![CDATA[
			SELECT COUNT(a.id) num FROM jy_material_type a
				WHERE 
					(
                $ISNULL{code}
                OR a.CODE like '%$U{code}%'
            ) or (
            	$ISNULL{name}
                OR a.name like '%$U{name}%'
            )
		]]></sql>
	</sqlinfo>


	<sqlinfo sqlid="JY0001Q003">
		<sqlname>获取物资类型最大编码</sqlname>
		<sql><![CDATA[
			select max(id) num from jy_material_type where $ISNULL{code}
		]]></sql>
	</sqlinfo>
	
	<sqlinfo sqlid="JY0001Q004">
		<sqlname>判断物资类型编码是否被使用</sqlname>
		<sql><![CDATA[
				SELECT
			COUNT(1) counts
		FROM
			jy_material_type type
		JOIN jy_material ma ON type.id = ma.jy_material_type_id
		WHERE
			type.id = $N{id}
		]]></sql>
	</sqlinfo>
	
	<sqlinfo sqlid="JY0001U002">
		<sqlname>修改物资类型</sqlname>
		<sql><![CDATA[
			UPDATE jy_material_type SET
			name=$S{name}
			WHERE id=$N{id}
		]]></sql>
	</sqlinfo>
	
	<sqlinfo sqlid="JY0001D001">
		<sqlname>删除物资类型</sqlname>
		<sql><![CDATA[
			DELETE FROM jy_material_type where id = $N{id}
		]]></sql>
	</sqlinfo>
	
</sqlinfos>